---
title: "Keep it simple - Transient object"
layout: post
date: 2018-06-17
categories: tip patterns overdesign cross-platform code-snippet net.core c#
---

# Introduction

First of a series of article with small tip on OOP programming can give you the instrument to write less & better code.

## Problem

In a standard OOP program there are fondamentally three types of life-cycle in object a run-time:

* Singleton - Object who lives for entire time who lives the process (eg. Service)
* Per-Scope - Object who lives in a defined (and timed) scope (eg. Request in a REST service)
* Transient - Object who lives the time needed for implementing an operation (eg. Unit of Work)

## How to keep simple

The container is a service which register object are build a runtime trought a factory, most known factory library support the concept of transient object, other framework simply not implement this pattern by design.

There are no any reasons (expect particular cases thath I don't remember now) to register and instantiate transient object using an object factory: this practice introduce an useless overhead and/or a level of indirection (specially when the transient object is registered by type requiring the factory to use the reflection to instantiate it...).

### Pratically

```csharp
class UnitOfWork : IDisposable
{
    ...
}

class SomeService
{
    public void SomeMethod
    {
        using (new UnitOfWork())
        {
            //Some work & commit
        }
    }
}
```

### Questions & Answers

Why is a bad practice register transient object using a container?

* Premature overdesign, more complex code, more performance code (using directly new operator VS using reflection or a delegate-lambda called by factory)
* I need passing a parameters? For global parameters use singlotone lifetime for context-session parameters use per-scope lifetime.

## Conclusion

Creating a multiplatform software is a great idea, but do not think that the simple transition to .NET Core will not be painless.
Correct unit test e/o integration e/o smoke e/o human UAT it will be better to plan it as contingency before thinking to a migration.
Also, Docker seems to be a very powerful & lightweight alternative to software virtualization.
